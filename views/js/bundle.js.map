{"version":3,"sources":["card.js"],"names":["stripe","customer","price","card","publishableKey","priceInfo","basic","amount","name","interval","currency","premium","stripeElements","Stripe","String","document","getElementById","elements","style","base","fontSize","color","fontFamily","fontSmoothing","create","mount","on","el","classList","add","remove","event","displayError","signupForm","addEventListener","evt","preventDefault","changeLoadingState","createCustomer","then","result","window","location","href","id","catch","err","console","log","paymentForm","changeLoadingStatePrices","latestInvoicePaymentIntentStatus","localStorage","getItem","invoiceId","isPaymentRetry","createPaymentMethod","error","textContent","message","login","email","password","res","axios","method","url","data","status","alert","setTimeout","assign","response","querySelector","e","value","params","URLSearchParams","search","substring","customerId","get","billingName","priceId","innerHTML","toUpperCase","type","billing_details","retryInvoiceWithNewPaymentMethod","paymentMethodId","paymentMethod","createSubscription","goToPaymentPage","innerText","getFormattedAmount","changePriceSelection","changePrice","demoChangePrice","switchPrices","newPriceIdSelected","currentSubscribedpriceId","subscriptionId","retrieveUpcomingInvoice","upcomingInvoice","capitalizeFirstLetter","amount_due","nextPaymentAttemptDateToDisplay","getDateStringFromUnixTimestamp","next_payment_attempt","confirmPriceChange","newPriceId","updateSubscription","searchParams","set","toString","billingEmail","fetch","headers","body","JSON","stringify","json","handlePaymentThatRequiresCustomerAction","subscription","invoice","isRetry","paymentIntent","payment_intent","latest_invoice","confirmCardPayment","client_secret","payment_method","handleRequiresPaymentMethod","setItem","onSubscriptionComplete","clearCache","onSubscriptionSampleDemoComplete","cancelSubscription","cancelSubscriptionResponse","subscriptionCancelled","retrieveCustomerPaymentMethod","getConfig","numberFormat","Intl","NumberFormat","currencyDisplay","parts","formatToParts","zeroDecimalCurrency","part","formattedAmount","format","string","tempString","toLowerCase","charAt","slice","date","nextPaymentAttemptDate","Date","day","getDate","month","getMonth","year","getFullYear","getCustomersPaymentMethod","brand","last4","currentPeriodEnd","current_period_end","querySelectorAll","i","length","childNodes","disabled","isLoading","resetDemo","clear"],"mappings":"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","file":"bundle.js","sourceRoot":"","sourcesContent":["\n/*eslint-disable*/\nlet stripe;\nlet customer;\nlet price;\nlet card;\nlet publishableKey;\nconst priceInfo = {\n  basic: {\n    amount: '9000',\n    name: 'basic',\n    interval: 'yearly',\n    currency: 'USD',\n  },\n  premium: {\n    amount: '90000',\n    name: 'premium',\n    interval: 'yearly',\n    currency: 'USD',\n  },\n};\n//\nfunction stripeElements(publishableKey) {\n  //console.log(\"key in stripe elements: \"+ publishableKey)\n  stripe = Stripe(String(publishableKey));\n\n  if (document.getElementById('card-element')) {\n    const elements = stripe.elements();\n\n    // Card Element styles\n    const style = {\n      base: {\n        fontSize: '16px',\n        color: '#32325d',\n        fontFamily:\n          '-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif',\n        fontSmoothing: 'antialiased',\n        '::placeholder': {\n          color: '#a0aec0',\n        },\n      },\n    };\n\n    card = elements.create('card', { style: style });\n\n    card.mount('#card-element');\n\n    card.on('focus', function () {\n      const el = document.getElementById('card-element-errors');\n      el.classList.add('focused');\n    });\n\n    card.on('blur', function () {\n      const el = document.getElementById('card-element-errors');\n      el.classList.remove('focused');\n    });\n\n    card.on('change', function (event) {\n      displayError(event);\n    });\n  }\n\n  const signupForm = document.getElementById('signup-form');\n  if (signupForm) {\n    signupForm.addEventListener('submit', function (evt) {\n      evt.preventDefault();\n      changeLoadingState(true);\n      // Create customer\n      createCustomer()\n        .then((result) => {\n          customer = result.customer;\n\n          window.location.href = `/prices.ejs?customerId=${customer.id}`;\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    });\n  }\n  \n  const paymentForm = document.getElementById('payment-form');\n  if (paymentForm) {\n    paymentForm.addEventListener('submit', function (evt) {\n      evt.preventDefault();\n      changeLoadingStatePrices(true);\n\n      // If a previous payment was attempted, get the lastest invoice\n      const latestInvoicePaymentIntentStatus = localStorage.getItem(\n        'latestInvoicePaymentIntentStatus'\n      );\n\n      if (latestInvoicePaymentIntentStatus === 'requires_payment_method') {\n        const invoiceId = localStorage.getItem('latestInvoiceId');\n        const isPaymentRetry = true;\n        // create new payment method & retry payment on invoice with new payment method\n        createPaymentMethod({\n          card,\n          isPaymentRetry,\n          invoiceId,\n        });\n      } else {\n        // create new payment method & create subscription\n        createPaymentMethod({ card });\n      }\n    });\n  }\n}\n\nfunction displayError(event) {\n  changeLoadingStatePrices(false);\n  const displayError = document.getElementById('card-element-errors');\n  if (event.error) {\n    displayError.textContent = event.error.message;\n  } else {\n    displayError.textContent = '';\n  }\n}\n\n//signinform logic\n\nconst login = async (email, password) =>{\n  try{\n    const res = await axios({\n      method: 'POST',\n      url: 'http://localhost:5000/api/users/login',\n      data:{\n        email,\n        password\n      }\n    });\n    if(res.status == 'success'){\n      alert('Logged in succesfully');\n      window.setTimeout(()=>{\n        location.assign('/');\n      },1500);\n    }\n  }catch(err){\n    alert(err.response.data.message);\n  }\n    \n};\n\ndocument.querySelector('.form').addEventListener('submit', e => {\n  e.preventDefault();\n  const email = document.getElementById('email').value;\n  const password = document.getElementById('password').value;\n  login(email, password);\n});\n\ndocument.getElementById('signin-btn').addEventListener('click', function(){\n  location.href = '/user/signin';\n});\n\n//Open Signin Page\n// function getSignin(){\n//   location.href = '/user/signin';\n// }\n\nfunction createPaymentMethod({ card, isPaymentRetry, invoiceId }) {\n  const params = new URLSearchParams(document.location.search.substring(1));\n  const customerId = params.get('customerId');\n  // Set up payment method for recurring usage\n  const billingName = document.querySelector('#name').value;\n\n  const priceId = document.getElementById('priceId').innerHTML.toUpperCase();\n  //console.log(priceId);\n  stripe\n    .createPaymentMethod({\n      type: 'card',\n      card: card,\n      billing_details: {\n        name: billingName,\n      },\n    })\n    .then((result) => {\n      if (result.error) {\n        displayError(result);\n      } else if (isPaymentRetry) {\n        // Update the payment method and retry invoice payment\n        retryInvoiceWithNewPaymentMethod({\n          customerId: customerId,\n          paymentMethodId: result.paymentMethod.id,\n          invoiceId: invoiceId,\n          priceId: priceId,\n        });\n      } else {\n        // Create the subscription\n        createSubscription({\n          customerId: customerId,\n          paymentMethodId: result.paymentMethod.id,\n          priceId: priceId,\n        });\n      }\n    });\n}\n\nfunction goToPaymentPage(priceId) {\n  // Show the payment screen\n  document.querySelector('#payment-form').classList.remove('hidden');\n\n  document.getElementById('total-due-now').innerText = getFormattedAmount(\n    priceInfo[priceId].amount\n  );\n\n  // Add the price selected\n  document.getElementById('price-selected').innerHTML = `${\n    '→ Subscribing to ' + '<span id=\"priceId\" class=\"font-bold\">'\n  }${priceInfo[priceId].name}</span>`;\n\n  // Show which price the user selected\n  if (priceId === 'premium') {\n    document.querySelector('#submit-premium-button-text').innerText =\n      'Selected';\n    document.querySelector('#submit-basic-button-text').innerText = 'Select';\n  } else {\n    document.querySelector('#submit-premium-button-text').innerText = 'Select';\n    document.querySelector('#submit-basic-button-text').innerText = 'Selected';\n  }\n\n  // Update the border to show which price is selected\n  changePriceSelection(priceId);\n}\n\nfunction changePrice() {\n  demoChangePrice();\n}\n\nfunction switchPrices(newPriceIdSelected) {\n  const params = new URLSearchParams(document.location.search.substring(1));\n  const currentSubscribedpriceId = params.get('priceId');\n  const customerId = params.get('customerId');\n  const subscriptionId = params.get('subscriptionId');\n  // Update the border to show which price is selected\n  changePriceSelection(newPriceIdSelected);\n\n  changeLoadingStatePrices(true);\n\n  // Retrieve the upcoming invoice to display details about\n  // the price change\n  retrieveUpcomingInvoice(customerId, subscriptionId, newPriceIdSelected).then(\n    (upcomingInvoice) => {\n      // Change the price details for price upgrade/downgrade\n      // calculate if it's upgrade or downgrade\n      document.getElementById(\n        'current-price-subscribed'\n      ).innerHTML = capitalizeFirstLetter(currentSubscribedpriceId);\n\n      document.getElementById(\n        'new-price-selected'\n      ).innerText = capitalizeFirstLetter(newPriceIdSelected);\n\n      document.getElementById('new-price-price-selected').innerText = `$${\n        upcomingInvoice.amount_due / 100\n      }`;\n\n      const nextPaymentAttemptDateToDisplay = getDateStringFromUnixTimestamp(\n        upcomingInvoice.next_payment_attempt\n      );\n      document.getElementById(\n        'new-price-start-date'\n      ).innerHTML = nextPaymentAttemptDateToDisplay;\n\n      changeLoadingStatePrices(false);\n    }\n  );\n\n  if (currentSubscribedpriceId != newPriceIdSelected) {\n    document.querySelector('#price-change-form').classList.remove('hidden');\n  } else {\n    document.querySelector('#price-change-form').classList.add('hidden');\n  }\n}\n\nfunction confirmPriceChange() {\n  const params = new URLSearchParams(document.location.search.substring(1));\n  const subscriptionId = params.get('subscriptionId');\n  const newPriceId = document.getElementById('new-price-selected').innerHTML;\n\n  updateSubscription(newPriceId.toUpperCase(), subscriptionId).then(\n    (result) => {\n      const searchParams = new URLSearchParams(window.location.search);\n      searchParams.set('priceId', newPriceId.toUpperCase());\n      searchParams.set('priceHasChanged', true);\n      window.location.search = searchParams.toString();\n    }\n  );\n}\n\nfunction createCustomer() {\n  const billingEmail = document.querySelector('#email').value;\n\n  return fetch('/api/purchases/create-customer', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      email: billingEmail,\n    }),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((result) => {\n      return result;\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n}\n\nfunction handlePaymentThatRequiresCustomerAction({\n  subscription,\n  invoice,\n  priceId,\n  paymentMethodId,\n  isRetry,\n}) {\n  if (subscription && subscription.status === 'active') {\n    // subscription is active, no customer actions required.\n    return { subscription, priceId, paymentMethodId };\n  }\n\n  // If it's a first payment attempt, the payment intent is on the subscription latest invoice.\n  // If it's a retry, the payment intent will be on the invoice itself.\n  const paymentIntent = invoice\n    ? invoice.payment_intent\n    : subscription.latest_invoice.payment_intent;\n\n  if (\n    paymentIntent.status === 'requires_action' ||\n    (isRetry === true && paymentIntent.status === 'requires_payment_method')\n  ) {\n    return stripe\n      .confirmCardPayment(paymentIntent.client_secret, {\n        payment_method: paymentMethodId,\n      })\n      .then((result) => {\n        if (result.error) {\n          // start code flow to handle updating the payment details\n          // Display error message in your UI.\n          // The card was declined (i.e. insufficient funds, card has expired, etc)\n          throw result;\n        } else if (result.paymentIntent.status === 'succeeded') {\n          // There's a risk of the customer closing the window before callback\n          // execution. To handle this case, set up a webhook endpoint and\n          // listen to invoice.paid. This webhook endpoint returns an Invoice.\n          return {\n            priceId: priceId,\n            subscription: subscription,\n            invoice: invoice,\n            paymentMethodId: paymentMethodId,\n          };\n        }\n      });\n  }\n  // No customer action needed\n  return { subscription, priceId, paymentMethodId };\n}\n\nfunction handleRequiresPaymentMethod({\n  subscription,\n  paymentMethodId,\n  priceId,\n}) {\n  if (subscription.status === 'active') {\n    // subscription is active, no customer actions required.\n    return { subscription, priceId, paymentMethodId };\n  }\n  if (\n    subscription.latest_invoice.payment_intent.status ===\n    'requires_payment_method'\n  ) {\n    // Using localStorage to store the state of the retry here\n    // (feel free to replace with what you prefer)\n    // Store the latest invoice ID and status\n    localStorage.setItem('latestInvoiceId', subscription.latest_invoice.id);\n    localStorage.setItem(\n      'latestInvoicePaymentIntentStatus',\n      subscription.latest_invoice.payment_intent.status\n    );\n    alert('Your card was declined.');\n  } else {\n    return { subscription, priceId, paymentMethodId };\n  }\n}\n\nfunction onSubscriptionComplete(result) {\n  //console.log(result);\n  // Payment was successful. Provision access to your service.\n  // Remove invoice from localstorage because payment is now complete.\n  clearCache();\n  // Change your UI to show a success message to your customer.\n  onSubscriptionSampleDemoComplete(result);\n  // Call your backend to grant access to your service based on\n  // the product your customer subscribed to.\n  // Get the product by using result.subscription.price.product\n}\n\nfunction createSubscription({ customerId, paymentMethodId, priceId }) {\n  //console.log(priceId);\n  return (\n    fetch('/api/purchases/create-subscription', {\n      method: 'post',\n      headers: {\n        'Content-type': 'application/json',\n      },\n      body: JSON.stringify({\n        customerId: customerId,\n        paymentMethodId: paymentMethodId,\n        priceId: priceId,\n      }),\n    })\n      .then((response) => {\n        return response.json();\n      })\n      // If the card is declined, display an error to the user.\n      .then((result) => {\n        if (result.error) {\n          // The card had an error when trying to attach it to a customer\n          throw result;\n        }\n        return result;\n      })\n      // Normalize the result to contain the object returned\n      // by Stripe. Add the addional details we need.\n      .then((result) => {\n        return {\n          // Use the Stripe 'object' property on the\n          // returned result to understand what object is returned.\n          subscription: result,\n          paymentMethodId: paymentMethodId,\n          priceId: priceId,\n        };\n      })\n      // Some payment methods require a customer to do additional\n      // authentication with their financial institution.\n      // Eg: 2FA for cards.\n      .then(handlePaymentThatRequiresCustomerAction)\n      // If attaching this card to a Customer object succeeds,\n      // but attempts to charge the customer fail. You will\n      // get a requires_payment_method error.\n      .then(handleRequiresPaymentMethod)\n      // No more actions required. Provision your service for the user.\n      .then(onSubscriptionComplete)\n      .catch((error) => {\n        // An error has happened. Display the failure to the user here.\n        // We utilize the HTML element we created.\n        displayError(error);\n      })\n  );\n}\n\nfunction retryInvoiceWithNewPaymentMethod({\n  customerId,\n  paymentMethodId,\n  invoiceId,\n  priceId,\n}) {\n  return (\n    fetch('/api/purchases/retry-invoice', {\n      method: 'post',\n      headers: {\n        'Content-type': 'application/json',\n      },\n      body: JSON.stringify({\n        customerId: customerId,\n        paymentMethodId: paymentMethodId,\n        invoiceId: invoiceId,\n      }),\n    })\n      .then((response) => {\n        return response.json();\n      })\n      // If the card is declined, display an error to the user.\n      .then((result) => {\n        if (result.error) {\n          // The card had an error when trying to attach it to a customer\n          throw result;\n        }\n        return result;\n      })\n      // Normalize the result to contain the object returned\n      // by Stripe. Add the addional details we need.\n      .then((result) => {\n        return {\n          // Use the Stripe 'object' property on the\n          // returned result to understand what object is returned.\n          invoice: result,\n          paymentMethodId: paymentMethodId,\n          priceId: priceId,\n          isRetry: true,\n        };\n      })\n      // Some payment methods require a customer to be on session\n      // to complete the payment process. Check the status of the\n      // payment intent to handle these actions.\n      .then(handlePaymentThatRequiresCustomerAction)\n      // No more actions required. Provision your service for the user.\n      .then(onSubscriptionComplete)\n      .catch((error) => {\n        // An error has happened. Display the failure to the user here.\n        // We utilize the HTML element we created.\n        displayError(error);\n      })\n  );\n}\n\nfunction retrieveUpcomingInvoice(customerId, subscriptionId, newPriceId) {\n  return fetch('/api/purchases/retrieve-upcoming-invoice', {\n    method: 'post',\n    headers: {\n      'Content-type': 'application/json',\n    },\n    body: JSON.stringify({\n      customerId: customerId,\n      subscriptionId: subscriptionId,\n      newPriceId: newPriceId,\n    }),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((invoice) => {\n      return invoice;\n    });\n}\n\nfunction cancelSubscription() {\n  changeLoadingStatePrices(true);\n  const params = new URLSearchParams(document.location.search.substring(1));\n  const subscriptionId = params.get('subscriptionId');\n\n  return fetch('/api/purchases/cancel-subscription', {\n    method: 'post',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      subscriptionId: subscriptionId,\n    }),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((cancelSubscriptionResponse) => {\n      return subscriptionCancelled(cancelSubscriptionResponse);\n    });\n}\n\nfunction updateSubscription(priceId, subscriptionId) {\n  return fetch('/api/purchases/update-subscription', {\n    method: 'post',\n    headers: {\n      'Content-type': 'application/json',\n    },\n    body: JSON.stringify({\n      subscriptionId: subscriptionId,\n      newPriceId: priceId,\n    }),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((response) => {\n      return response;\n    });\n}\n\nfunction retrieveCustomerPaymentMethod(paymentMethodId) {\n  return fetch('/api/purchases/retrieve-customer-payment-method', {\n    method: 'post',\n    headers: {\n      'Content-type': 'application/json',\n    },\n    body: JSON.stringify({\n      paymentMethodId: paymentMethodId,\n    }),\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((response) => {\n      return response;\n    });\n}\n\nfunction getConfig() {\n  return fetch('/api/purchases/config', {\n    method: 'get',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  })\n    .then((response) => {\n      return response.json();\n    })\n    .then((response) => {\n      //console.log(\"res from /config: \"+JSON.stringify(response));\n      publishableKey = response.publishableKey;\n      // Set up Stripe Elements\n      stripeElements(response.publishableKey);\n    });\n}\n\ngetConfig();\n\n/* ------ Sample helpers ------- */\n/* ---- HTML Implementation ---- */\nfunction getFormattedAmount(amount) {\n  // Format price details and detect zero decimal currencies\n  var amount = amount;\n  const numberFormat = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n    currencyDisplay: 'symbol',\n  });\n  const parts = numberFormat.formatToParts(amount);\n  let zeroDecimalCurrency = true;\n  for (const part of parts) {\n    if (part.type === 'decimal') {\n      zeroDecimalCurrency = false;\n    }\n  }\n  amount = zeroDecimalCurrency ? amount : amount / 100;\n  const formattedAmount = numberFormat.format(amount);\n\n  return formattedAmount;\n}\n\nfunction capitalizeFirstLetter(string) {\n  const tempString = string.toLowerCase();\n  return tempString.charAt(0).toUpperCase() + tempString.slice(1);\n}\n\nfunction getDateStringFromUnixTimestamp(date) {\n  const nextPaymentAttemptDate = new Date(date * 1000);\n  const day = nextPaymentAttemptDate.getDate();\n  const month = nextPaymentAttemptDate.getMonth() + 1;\n  const year = nextPaymentAttemptDate.getFullYear();\n\n  return `${month}/${day}/${year}`;\n}\n\n// For demo purpose only\nfunction getCustomersPaymentMethod() {\n  const params = new URLSearchParams(document.location.search.substring(1));\n\n  const paymentMethodId = params.get('paymentMethodId');\n  if (paymentMethodId) {\n    retrieveCustomerPaymentMethod(paymentMethodId).then(function (response) {\n      document.getElementById(\n        'credit-card-last-four'\n      ).innerText = `${capitalizeFirstLetter(response.card.brand)} •••• ${\n        response.card.last4\n      }`;\n\n      document.getElementById(\n        'subscribed-price'\n      ).innerText = capitalizeFirstLetter(params.get('priceId'));\n    });\n  }\n}\n\ngetCustomersPaymentMethod();\n\n// Shows the cancellation response\nfunction subscriptionCancelled() {\n  document.querySelector('#subscription-cancelled').classList.remove('hidden');\n  document.querySelector('#subscription-settings').classList.add('hidden');\n}\n\n/* Shows a success / error message when the payment is complete */\nfunction onSubscriptionSampleDemoComplete({\n  priceId,\n  subscription,\n  paymentMethodId,\n  invoice,\n}) {\n  let subscriptionId;\n  let currentPeriodEnd;\n  let customerId;\n  if (subscription) {\n    subscriptionId = subscription.id;\n    currentPeriodEnd = subscription.current_period_end;\n    if (typeof subscription.customer === 'object') {\n      customerId = subscription.customer.id;\n    } else {\n      customerId = subscription.customer;\n    }\n  } else {\n    const params = new URLSearchParams(document.location.search.substring(1));\n    subscriptionId = invoice.subscription;\n    currentPeriodEnd = params.get('currentPeriodEnd');\n    customerId = invoice.customer;\n  }\n\n  window.location.href = `/account.html?subscriptionId=${subscriptionId}&priceId=${priceId}&currentPeriodEnd=${currentPeriodEnd}&customerId=${customerId}&paymentMethodId=${paymentMethodId}`;\n}\n\nfunction demoChangePrice() {\n  document.querySelector('#basic').classList.remove('border-pasha');\n  document.querySelector('#premium').classList.remove('border-pasha');\n  document.querySelector('#price-change-form').classList.add('hidden');\n\n  // Grab the priceId from the URL\n  // This is meant for the demo, replace with a cache or database.\n  const params = new URLSearchParams(document.location.search.substring(1));\n  const priceId = params.get('priceId').toLowerCase();\n\n  // Show the change price screen\n  //console.log(priceId);\n  document.querySelector('#prices-form').classList.remove('hidden');\n  document\n    .querySelector(`#${priceId.toLowerCase()}`)\n    .classList.add('border-pasha');\n\n  const elements = document.querySelectorAll(`#submit-${priceId}-button-text`);\n  for (let i = 0; i < elements.length; i++) {\n    elements[0].childNodes[3].innerText = 'Current';\n  }\n  if (priceId === 'premium') {\n    document.getElementById('submit-premium').disabled = true;\n    document.getElementById('submit-basic').disabled = false;\n  } else {\n    document.getElementById('submit-premium').disabled = false;\n    document.getElementById('submit-basic').disabled = true;\n  }\n}\n\n// Changes the price selected\nfunction changePriceSelection(priceId) {\n  document.querySelector('#basic').classList.remove('border-pasha');\n  document.querySelector('#premium').classList.remove('border-pasha');\n  document\n    .querySelector(`#${priceId.toLowerCase()}`)\n    .classList.add('border-pasha');\n}\n\n// Show a spinner on subscription submission\nfunction changeLoadingState(isLoading) {\n  if (isLoading) {\n    document.querySelector('#button-text').classList.add('hidden');\n    document.querySelector('#loading').classList.remove('hidden');\n    document.querySelector('#signup-form button').disabled = true;\n  } else {\n    document.querySelector('#button-text').classList.remove('hidden');\n    document.querySelector('#loading').classList.add('hidden');\n    document.querySelector('#signup-form button').disabled = false;\n  }\n}\n\n// Show a spinner on subscription submission\nfunction changeLoadingStatePrices(isLoading) {\n  if (isLoading) {\n    document.querySelector('#button-text').classList.add('hidden');\n    document.querySelector('#loading').classList.remove('hidden');\n\n    document.querySelector('#submit-basic').classList.add('invisible');\n    document.querySelector('#submit-premium').classList.add('invisible');\n    if (document.getElementById('confirm-price-change-cancel')) {\n      document\n        .getElementById('confirm-price-change-cancel')\n        .classList.add('invisible');\n    }\n  } else {\n    document.querySelector('#button-text').classList.remove('hidden');\n    document.querySelector('#loading').classList.add('hidden');\n\n    document.querySelector('#submit-basic').classList.remove('invisible');\n    document.querySelector('#submit-premium').classList.remove('invisible');\n    if (document.getElementById('confirm-price-change-cancel')) {\n      document\n        .getElementById('confirm-price-change-cancel')\n        .classList.remove('invisible');\n      document\n        .getElementById('confirm-price-change-submit')\n        .classList.remove('invisible');\n    }\n  }\n}\n\nfunction resetDemo() {\n  clearCache();\n  window.location.href = '/';\n}\n\nfunction clearCache() {\n  localStorage.clear();\n}\n"]}